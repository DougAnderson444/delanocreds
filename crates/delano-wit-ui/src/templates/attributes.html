<div class="" id="{{app.attributes_html_id}}">
    <h2 class="text-xl font-bold">Create a Credential</h2>
    <div class="flex flex-col w-full items-center">
      {% for attr in issuer.attributes %}
      <div class="flex flex-row w-full items-center">
        <form class="flex flex-col w-full sm:flex-row py-1 animate-slideDown">
          <!-- I need to put both: key|op|value and the loop.index0 in the context somehow -->
          <input
            class="flex-1 border-2 border-blue-200 sm:rounded-l-md p-2"
            type="text"
            id="{{ issuer.input_key.id|on('keyup') }}"
            data-context-name="editissuerinput"
            data-context-value='{ "tag": "key", "val": {{loop.index0}} }'
            value="{{attr.key}}"
            data-context-target="{{ issuer.input_key.target }}"
          />
          <select
            id="{{ issuer.input_key.id|on('change') }}"
            data-context-name="editissuerinput"
            data-context-value='{ "tag": "op", "val": {{loop.index0}} }'
            class="p-1 bg-blue-500 text-white font-semibold"
            data-context-target="{{ issuer.input_key.target }}"
          >
            <!-- In minijinja, I need to check if attr.op|select("==", "="), then insert the word "selected" if true for >,<, and = -->
            <option value="=" {% if attr.op|select("==", "=") %}selected{% endif %}>equals</option>
            <option value=">" {% if attr.op|select("==", ">") %}selected{% endif %}>greater than</option>
            <option value="<" {% if attr.op|select("==", "<") %}selected{% endif %}>less than</option>            
          </select>
          <input
            class="flex-1 border-2 border-blue-200 sm:rounded-r-md p-2"
            type="text"
            id="{{ issuer.input_key.id|on('keyup') }}"
            data-context-name="editissuerinput"
            data-context-value='{ "tag": "value", "val": {{loop.index0}} }'
            value="{{attr.value}}"
            data-context-target="{{ issuer.input_key.target }}"
          />
          <div class="flex-grow-0 mx-2">
            <button
              class="bg-red-500 hover:bg-red-700 text-xl text-white font-bold py-2 px-4 m-1 rounded shadow"
              type="button"
              name="button"
              data-context="removeattribute"
            >
              x
            </button>
          </div>
        </form>
      </div>
      {% endfor %}
      <!-- the context must match the context variant in the WIT world, this is how it gets routed to the renderer -->
      <button
        id="{{ issuer.add_attribute_button.id|on('click') }}"
        class="border-4 border-dashed w-full hover:bg-blue-500 hover:text-white hover:border-neutral-50 font-bold py-2 px-4 rounded text-xl"
        type="button"
        name="addattribute"
        data-context-name="addattribute"
        data-context-value=""
        data-context-target="{{ issuer.add_attribute_button.target }}"
      >
        +
      </button>
    </div>
  </div>
